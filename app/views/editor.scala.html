@(output: String)

@scripts = {
    <link href="http://netdna.bootstrapcdn.com/bootswatch/3.1.1/superhero/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="@routes.Assets.at("javascripts/codemirror-4.2/lib/codemirror.css")">
    <script src="@routes.Assets.at("javascripts/codemirror-4.2/lib/codemirror.js")"></script>
    <script src="@routes.Assets.at("javascripts/codemirror-4.2/mode/clike/clike.js")"></script>
 }

@main("Java Web IDE", scripts) {

    <div class="container">
    	<div class="row">
    		<div class="col-lg-12">
				<form role="form" action ="@routes.Application.submitCode()" method="POST">
					<div class="form-group">
						<label for="javaSource"><h3>Java Code</h3></label> 
						<textarea id="javaSource" name="javaSource" class="form-control" rows="3"></textarea>
						<script>
						    /*HTMLTextAreaElement.prototype.getCaretPosition = function () { //return the caret position of the textarea
						        return this.selectionStart;
						    };
						    HTMLTextAreaElement.prototype.setCaretPosition = function (position) { //change the caret position of the textarea
						        this.selectionStart = position;
						        this.selectionEnd = position;
						        this.focus();
						    };
						    HTMLTextAreaElement.prototype.hasSelection = function () { //if the textarea has selection then return true
						        if (this.selectionStart == this.selectionEnd) {
						            return false;
						        } else {
						            return true;
						        }
						    };
						    HTMLTextAreaElement.prototype.getSelectedText = function () { //return the selection text
						        return this.value.substring(this.selectionStart, this.selectionEnd);
						    };
						    HTMLTextAreaElement.prototype.setSelection = function (start, end) { //change the selection area of the textarea
						        this.selectionStart = start;
						        this.selectionEnd = end;
						        this.focus();
						    };
						
						    var textarea = document.getElementsByTagName('textarea')[0]; 
						
						    textarea.onkeydown = function(event) {
						        
						        //support tab on textarea
						        if (event.keyCode == 9) { //tab was pressed
						            var newCaretPosition;
						            newCaretPosition = textarea.getCaretPosition() + "    ".length;
						            textarea.value = textarea.value.substring(0, textarea.getCaretPosition()) + "    " + textarea.value.substring(textarea.getCaretPosition(), textarea.value.length);
						            textarea.setCaretPosition(newCaretPosition);
						            return false;
						        }
						        if(event.keyCode == 8){ //backspace
						            if (textarea.value.substring(textarea.getCaretPosition() - 4, textarea.getCaretPosition()) == "    ") { //it's a tab space
						                var newCaretPosition;
						                newCaretPosition = textarea.getCaretPosition() - 3;
						                textarea.value = textarea.value.substring(0, textarea.getCaretPosition() - 3) + textarea.value.substring(textarea.getCaretPosition(), textarea.value.length);
						                textarea.setCaretPosition(newCaretPosition);
						            }
						        }
						        if(event.keyCode == 37){ //left arrow
						            var newCaretPosition;
						            if (textarea.value.substring(textarea.getCaretPosition() - 4, textarea.getCaretPosition()) == "    ") { //it's a tab space
						                newCaretPosition = textarea.getCaretPosition() - 3;
						                textarea.setCaretPosition(newCaretPosition);
						            }    
						        }
						        if(event.keyCode == 39){ //right arrow
						            var newCaretPosition;
						            if (textarea.value.substring(textarea.getCaretPosition() + 4, textarea.getCaretPosition()) == "    ") { //it's a tab space
						                newCaretPosition = textarea.getCaretPosition() + 3;
						                textarea.setCaretPosition(newCaretPosition);
						            }
						        } 
						    }*/
						    
						    var editor = CodeMirror.fromTextArea(document.getElementById('javaSource'), {
						    	matchBrackets: true,
						    	lineNumbers: true,
						    	mode: "text/x-java"
					  		});
					    </script>
					</div>
					<button type="submit" class="btn btn-default">Submit</button>
				</form>
			</div>
		</div>
		
		<hr>
		
		<div class="row">
			<div class="col-lg-12">
				<h3>Output:</h3>
				<div class="well">
					<pre>@Html(output)</pre>
				</div>
			</div>
		</div>
	</div>

}